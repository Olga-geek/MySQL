--6.1 Пусть задан некоторый пользователь. Из всех друзей этого пользователя найдите человека, который больше всех общался с нашим пользователем.--

SELECT
from_user_id, to_user_id,
count(*) as cnt
FROM message
where
to_user_id = '17'
group by from_user_id

SELECT
from_user_id, to_user_id,
count(*) as cnt
FROM message
where
from_user_id in (
SELECT 
if (from_user_id = 17, to_user_id,from_user_id) as friend_id
FROM friend_request
where
 (from_user_id = 17 or to_user_id = 17) and `status` = 1)
group by from_user_id

-- 6.2 Подсчитать общее количество лайков, которые получили 10 самых молодых пользователей.--

